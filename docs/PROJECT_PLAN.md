# План проекта: TJR (Telegram Job Radar for macOS)

## 1) Цель и результат
- Цель: сократить время поиска релевантных вакансий в Telegram-чатах.
- Главный результат MVP: пользователь видит в GUI отфильтрованный список релевантных сообщений из выбранных чатов с оценкой релевантности.

## 2) MVP-объем (что делаем)
- Вход в Telegram под учеткой пользователя через MTProto (по номеру, коду, 2FA).
- Ввод Telegram API ID/API Hash в отдельном окне настроек.
- Подключение списка целевых чатов/групп через окно настроек (ручной ввод/выбор).
- Периодический сбор новых сообщений из выбранных чатов.
- Анализ релевантности по профилю пользователя по 3 критериям:
  - совпадение по названию роли;
  - совпадение по профилю;
  - совпадение по отрасли.
- GUI (не терминал):
  - экран авторизации;
  - отдельный экран настроек (ключи + профиль + чаты);
  - экран источников (чаты);
  - лента найденных сообщений;
  - карточка сообщения с переходом в Telegram.
- Локальное хранение данных: SQLite + зашифрованное хранение сессии.
- Уведомления macOS о новых релевантных сообщениях.

## 3) Вне MVP (позже)
- ML/LLM-классификация вместо rule-based.
- Авто-ответы в чаты.
- Облачная синхронизация между устройствами.
- Мультиаккаунт.

## 4) Рекомендуемый стек
- Язык/ядро: Python 3.12.
- Telegram клиент: Telethon (MTProto user client).
- GUI: PySide6 (нативное desktop окно, не терминал).
- БД: SQLite.
- Упаковка для macOS: py2app или Briefcase.

Почему так: быстрый старт MVP, зрелая библиотека Telegram, минимальная сложность доставки на Mac.

## 5) Архитектура (MVP)
- `src/app/ui` — окна и экраны GUI.
- `src/app/core` — бизнес-логика (правила релевантности, оркестрация задач).
- `src/app/integrations/telegram` — авторизация, чтение чатов, обработка событий.
- `src/app/storage` — SQLite, репозитории, миграции.
- `src/app/security` — шифрование сессионных артефактов.

Поток:
1. Логин в Telegram.
2. Выбор чатов.
3. Фоновый listener новых сообщений.
4. Нормализация текста и скоринг.
5. Сохранение и показ в UI + уведомление.

## 6) План этапов

### Этап 0: Discovery + ограничения (1-2 дня)
- Уточнить профиль пользователя (стек, уровень, стоп-слова).
- Уточнить объём чатов и частоту проверки.
- Проверить policy/ограничения Telegram API под user client.

### Этап 1: Технический каркас (2-3 дня)
- Инициализация проекта, структура модулей.
- Базовое окно PySide6.
- Конфиг и логирование.

### Этап 2: Telegram интеграция (3-4 дня)
- Авторизация и восстановление сессии.
- Получение списка диалогов.
- Слушатель новых сообщений в выбранных чатах.

### Этап 3: Анализ релевантности (2-3 дня)
- Rule-based engine (веса, must-have, стоп-слова).
- Скоринг и порог релевантности.
- Хранение результатов.

### Этап 4: Полноценный GUI (3-5 дней)
- Экран источников, фильтров и ленты результатов.
- Поиск/сортировка/статусы просмотрено/в избранное.

### Этап 5: Стабилизация и релиз-кандидат (2-3 дня)
- Тесты критичных сценариев.
- Обработка ошибок/реконнектов.
- Сборка `.app` для macOS.

Итого MVP: ориентир 12-20 рабочих дней.

## 7) Black-hat стресс-тест (ключевые риски)

### Тезис
Собираем desktop-приложение, которое под user-аккаунтом Telegram мониторит чаты и ищет вакансии.

### Топ-3 слабых места
1. Ограничения Telegram и риск блокировки при агрессивном polling/неправильном использовании API.
2. Безопасность сессии пользователя: компрометация локального session-файла = доступ к аккаунту.
3. Качество релевантности: много ложных срабатываний убьет ценность продукта.

### Каверзные вопросы
- Что будет, если Telegram временно ограничит методы чтения/частоту запросов?
- Как пользователь безопасно «разлогинится» и удалит все чувствительные артефакты?
- Какие метрики докажут, что фильтрация реально экономит время, а не шумит?

### Что обязательно проверить до реализации
- Лимиты и best practices Telethon/Telegram для user clients.
- Стратегию хранения секретов (Keychain/шифрование, а не plain session).
- Минимально приемлемый quality bar (precision@N, доля полезных находок).

### Решение
Доработать детали безопасности и метрики качества до начала кодинга ядра.

## 8) Критерии успеха MVP
- Авторизация и стабильное чтение выбранных чатов без ручного вмешательства.
- Релевантность оценивается тремя критериями: название, профиль, отрасль.
- Время от появления сообщения в чате до показа в приложении: до 60 секунд.
- Установка и запуск на целевом Mac без терминала.

## 9) Зафиксированные решения
- Название проекта: `TJR`.
- Стек MVP: `Python + PySide6 + Telethon`.
- Чаты, профиль вакансий и ключи Telegram задаются в окне настроек.
- Порог качества: совпадение по названию, профилю и отрасли.
